<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>나의 조각 찾기 프로젝트: 최종 성찰</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.development.min.js" crossorigin></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.development.min.js" crossorigin></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prop-types/15.8.1/prop-types.min.js" crossorigin></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/recharts/2.10.3/Recharts.min.js" crossorigin></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js" crossorigin></script>

    <style>
        @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css');
        body { font-family: 'Pretendard', sans-serif; }
        .custom-scrollbar::-webkit-scrollbar { width: 8px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #f1f1f1; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #d1d5db; border-radius: 4px; }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #9ca3af; }
        
        /* 애니메이션 */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in { animation: fadeIn 0.5s ease-out forwards; }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 10%, 90% { transform: translateX(-4px); } 50% { transform: translateX(4px); } }
        .animate-shake { animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both; }
        
        /* 플레이스홀더 스타일링 (더 흐리게) */
        ::placeholder { color: #9ca3af; opacity: 0.7; }
    </style>
</head>
<body class="bg-indigo-50 text-gray-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        const { Radar, RadarChart, PolarGrid, PolarAngleAxis, PolarRadiusAxis, ResponsiveContainer, Legend } = window.Recharts || {};

        // 색상 및 의미 데이터
        const COLOR_PALETTE = [
            { name: "열정의 빨강", value: "#ef4444", meaning: "뜨거운 열정과 에너지", text: "text-red-500" },
            { name: "에너지 주황", value: "#f97316", meaning: "즐거움을 주는 비타민", text: "text-orange-500" },
            { name: "긍정의 노랑", value: "#eab308", meaning: "희망찬 긍정의 힘", text: "text-yellow-500" },
            { name: "싱그러운 연두", value: "#84cc16", meaning: "새로운 도전과 성장", text: "text-lime-500" },
            { name: "성실한 초록", value: "#22c55e", meaning: "성실함과 평화", text: "text-green-500" },
            { name: "강인한 블랙", value: "#1f2937", meaning: "흔들리지 않는 굳건함", text: "text-gray-900" }, 
            { name: "자유로운 하늘", value: "#0ea5e9", meaning: "넓은 마음과 자유", text: "text-sky-500" },
            { name: "지혜로운 파랑", value: "#3b82f6", meaning: "깊은 생각과 지혜", text: "text-blue-500" },
            { name: "신비한 남색", value: "#6366f1", meaning: "특별한 시선과 직관", text: "text-indigo-500" },
            { name: "창의적 보라", value: "#a855f7", meaning: "세상을 바꾸는 독창성", text: "text-purple-500" },
            { name: "따뜻한 분홍", value: "#ec4899", meaning: "따뜻한 사랑과 배려", text: "text-pink-500" },
            { name: "차분한 회색", value: "#6b7280", meaning: "믿음직한 묵묵함", text: "text-gray-500" }
        ];

        // 공통 질문 컴포넌트
        const QuestionStep = ({ icon, title, description, question, name, value, onChange, onNext, onBack, placeholder, step, isLast, color = "blue", children, isError }) => {
            const colorClasses = {
                purple: "text-purple-500 border-purple-200 ring-purple-200 bg-purple-50/50",
                green: "text-green-500 border-green-200 ring-green-200 bg-green-50/50",
                pink: "text-pink-500 border-pink-200 ring-pink-200 bg-pink-50/50",
                indigo: "text-indigo-500 border-indigo-200 ring-indigo-200 bg-indigo-50/50",
                yellow: "text-yellow-500 border-yellow-200 ring-yellow-200 bg-yellow-50/50",
                blue: "text-blue-500 border-blue-200 ring-blue-200 bg-blue-50/50"
            };
            const displayColorClass = colorClasses[color] || colorClasses.blue;

            return (
                <div className="flex flex-col h-full max-w-3xl mx-auto w-full animate-fade-in pb-10">
                    <div className="flex items-center gap-4 mb-6">
                        <div className={`bg-white p-4 rounded-2xl shadow-sm border border-gray-100 text-3xl`}>
                            {icon}
                        </div>
                        <div>
                            <h2 className="text-2xl font-bold text-gray-800">{title}</h2>
                            <p className="text-sm text-gray-500 mt-1 font-medium">나의 생각을 자유롭게 적어보세요</p>
                        </div>
                    </div>

                    <div className="bg-white p-6 md:p-8 rounded-3xl shadow-lg border border-gray-100 mb-8 flex-1 flex flex-col">
                        <p className="text-gray-700 text-lg mb-6 leading-relaxed font-medium bg-gray-50 p-5 rounded-2xl border-l-4 border-gray-300 break-keep">
                            {description}
                        </p>

                        {children}

                        {question && (
                            <div className="flex-1 flex flex-col mt-4">
                                <label className="block text-gray-800 font-bold mb-4 text-xl leading-relaxed break-keep">
                                    {question.split('_______________').map((part, i, arr) => (
                                        <React.Fragment key={i}>
                                            {part}
                                            {i < arr.length - 1 && (
                                                <span className={`inline-block border-b-2 px-2 mx-1 min-w-[80px] text-center bg-gray-50 rounded-t`}>
                                                    (빈칸)
                                                </span>
                                            )}
                                        </React.Fragment>
                                    ))}
                                </label>
                                
                                <textarea
                                    name={name}
                                    value={value}
                                    onChange={onChange}
                                    placeholder={placeholder}
                                    className={`w-full p-6 border-2 rounded-2xl outline-none transition-all min-h-[300px] text-lg leading-loose shadow-inner resize-y ${displayColorClass.split(' ').slice(1).join(' ')} focus:ring-2 focus:ring-blue-400 focus:border-blue-400 placeholder-gray-400 ${isError && value.length === 0 ? 'border-red-500 ring-2 ring-red-200 animate-shake' : 'border-gray-200'}`}
                                ></textarea>
                                <p className={`text-right text-sm mt-3 font-medium flex justify-end items-center gap-1 ${isError && value.length === 0 ? 'text-red-500 font-bold' : 'text-gray-400'}`}>
                                    {isError && value.length ===
